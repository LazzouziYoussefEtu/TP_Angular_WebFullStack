<!-- <h2>Catalogue Produits</h2> -->
<!-- <div class="product-list">
<div *ngFor="let p of products" class="card">
  <h3>{{ p.productTitle }}</h3>
  <p>Prix: {{ p.prouctPrice }}</p>
  <p>Ref: {{ p.productID }}</p>
  <img [src]="p.imageUrl()" (alt)="p.productTitle" class="product-image"/>

  <button (click)="onAddToCart(p)">Ajouter au panier</button>
</div>
</div> -->
<!-- <table class="product-table">
<tr *ngFor="let p of products">
  <td><img [src]="p.imageUrl()" (alt)="p.productTitle" class="product-image"/></td>
  <td> <br>{{ p.productTitle }}
    <br>{{ p.productPrice }}
      <br>{{ p.productID }}</td>
      <td><button (click)="onAddToCart(p)" class="btn-remove">Ajouter au panier</button></td>
    </tr>
  </table> -->

  <div class="catalog-container">
    <h2>{{ 'CATALOG.TITLE' | translate }}</h2>

    <div class="filters-container">
      <input
        type="text"
        [(ngModel)]="searchTerm"
        [placeholder]="'CATALOG.SEARCH_PLACEHOLDER' | translate"
        class="search-input"
        />

      <select [(ngModel)]="selectedCategory" class="category-select">
        <option value="">{{ 'CATALOG.ALL_CATEGORIES' | translate }}</option>
        @for (cat of categories; track cat) {
          <option [value]="cat">{{ cat }}</option>
        }
      </select>
    </div>

    <div class="table-responsive">
      <table class="product-table">
        <thead>
          <tr>
            <th>{{ 'CATALOG.TABLE.IMAGE' | translate }}</th>
            <th>{{ 'CATALOG.TABLE.NAME' | translate }}</th>
            <th>{{ 'CATALOG.TABLE.CATEGORY' | translate }}</th>
            <th>{{ 'CATALOG.TABLE.PRICE' | translate }}</th>
          </tr>
        </thead>
        <tbody>
          @for (p of filteredProducts; track p) {
            <tr>
              <td>
                <img [src]="p.imageUrl()" [alt]="p.productTitle" class="thumb-img">
              </td>
              <td class="product-name" (click)="openProductDetails(p)" style="cursor: pointer;">
                {{ p.productTitle }}
              </td>
              <td>
                <span class="category-badge">{{ p.category }}</span>
              </td>
              <td class="product-price">{{ p.productPrice }}</td>
            </tr>
          }

          @if (filteredProducts.length === 0) {
            <tr>
              <td colspan="4" style="text-align: center; padding: 20px;">
                {{ 'CATALOG.NO_PRODUCTS' | translate }}
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>

  <!-- Product details modal -->
  @if (selectedProduct) {
    <app-product-details
      [product]="selectedProduct"
      (close)="closeProductDetails()">
    </app-product-details>
  }